{Previous tutorial}[link:files/doc/tutorials/02-PathPlan.html]
= Understanding plan execution

This tutorial will show you how to trace plan execution, and understand how the
plans you build are actually executed by the system. It will not go in great
details, but it should help you understand more advanced uses of Roby.

== Getting a log file
We will first get a log file of the plan execution of the PathPlan robot
(previous tutorial). Plan execution logs are expensive from a CPU point of
view, so they are disabled by default. Enable them back by editing
config/app.yml and uncomment <tt>events: true</tt> around line 23. 

Now, run again the controller

  # scripts/run PathPlan

and in the shell, do

  >> move_to! :x => 10, :y => 10
  => MoveTo{goal => Vector3D(x=10.000000,y=10.000000,z=0.000000)}:0x4840c8d8[]
  >>
  !task MoveTo{goal => Vector3D(x=10.000000,y=10.000000,z=0.000000)}:0x4840c8d8[] finished successfully

Now, let's save the log files for further analysis (otherwise, one could
destroy them by restarting the controller).

  # scripts/result tut04
  moving /home/doudou/dev/roby-tutorials/log to /home/doudou/dev/roby-tutorials/results/20080502-tut04

<tt>scripts/result</tt> copies all files in <tt>log/</tt> into a subdirectory
of the result dir (by default APP_DIR/results, but can be changed in
config/app.yml). The target directory name is generated following a pattern of
<tt><current date>-<name provided on command line></tt>.

== Displaying the log file
Now, let's go in the directory where the log files are. If you look into it,
two PathPlan files are present: <tt>PathPlan-events.log</tt> and
<tt>PathPlan-index.log</tt>.  The first one includes a trace of everything that
happens in the Roby controller which has been traced. The second one can
actually be generated from data in the first one. It is simply used to speed up
operations.

The data in the event log can be used to display the plan operations graphically.
For that, you need to have installed {Ruby/Qt4}[http://korundum.rubyforge.org], as
the GUI is written using Qt and Ruby.

To start it, simply do the following in the directory of the log files:

  # roby-log replay PathPlan

TODO: on a computer where roby-log works
